<!DOCTYPE html>
<html> 
<!--   https://developers.arcgis.com/en/javascript/jssamples/fl_ondemand.html  -->	
  <head> 
    <meta http-equiv="Content-Type" content="text/html; charset=utf-8"> 
    <meta http-equiv="X-UA-Compatible" content="IE=7, IE=9, IE=10"> 

    <!--The viewport meta tag is used to improve the presentation and behavior of the samples on iOS devices-->
    
    <!-- On iOS, as part of optimizing your web application, have it use the standalone mode to look more like 
    a native application. When you use this standalone mode, Safari is not used to display the web contentâ€”specifically,
    there is no browser URL text field at the top of the screen or button bar at the bottom of the screen. -->
<!--    <meta name="apple-mobile-web-app-capable" content="yes"> -->
    
    <!-- Sets the style of the status bar for a web application when in standalone mode -->    
<!--    <meta name="apple-mobile-web-app-status-bar-style" content="black-translucent">  -->
    

    <!-- Controls the dimensions and scaling of the browser window in iOS, Android, webOS, Opera Mini, Opera Mobile and Blackberry. 
    	 width: controls  the width of the viewport 
    	 initial-scale: controls the zoom level when the  page is first loaded 
    	 maximum-scale: control how users are allowed to zoom the page in or out 
    	 user-scalable: control how users are allowed to zoom the page in or out -->
    	 
 <!--    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">  -->
   <meta name="viewport" content="initial-scale=1, maximum-scale=1,user-scalable=no">  
 
 
    <title>World Coal Quality Inventory</title> 

    <link rel="stylesheet" href="http://js.arcgis.com/3.6/js/dojo/dijit/themes/claro/claro.css"> 
    <link rel="stylesheet" href="http://js.arcgis.com/3.6/js/esri/css/esri.css">
    <link rel="stylesheet" href="css/woqui.css">

    <script src="http://js.arcgis.com/3.6compact/"></script> 
    <script> 
    	var map;
      
      require([
        "esri/map", "esri/InfoTemplate", "esri/layers/FeatureLayer",
        "dojo/parser", "dojo/domReady!"
      ], function(
        Map, InfoTemplate, FeatureLayer, 
        parser
      ) {
      	
	    // require(["esri/map", "dojox/mobile", "dojox/mobile/parser", "esri/sniff", 
        	     // "dojox/mobile/deviceTheme", "dojo/dom", "dijit/registry", "dojo/on", 
                 // "dojox/mobile/ToolBarButton", "dojox/mobile/View"],
//       
  // function(Map, mobile, parser, has, dTheme, dom, registry, on) {
// 
        parser.parse();
 //       mobile.hideAddressBar();

   		var	lods = [	{"level" : 0, "resolution" : 39135.75848200009, "scale" : 147914381.897889}, {"level" : 1, "resolution" : 19567.87924099992, "scale" : 73957190.948944 },
						{"level" : 2, "resolution" : 9783.93962049996,  "scale" : 36978595.474472},  {"level" : 3, "resolution" : 4891.96981024998,  "scale" : 18489297.737236},
						{"level" : 4, "resolution" : 2445.98490512499,  "scale" : 9244648.868618},	{"level" : 5, "resolution" : 1222.99245256249,  "scale" : 4622324.434309} ];

        var map = new Map("mapDiv", { 
        	basemap: "topo",
        	center: [-5,36 ],
			zoom: 0,
			sliderStyle: "large",
          	wrapAround180: false,
          	logo: false,
 			showAttribution: false,
 			lods: lods
        });
       
        map.on("load", initOperationalLayer);

        function initOperationalLayer() {
          var infoTemplate = new InfoTemplate("${cntry_name}", "Samples : ${samples}<br>Contact : ${usgs}<br>Collaborator : ${collab}<br>");
          var featureLayer = new FeatureLayer("http://ncrdspublic.er.usgs.gov/ArcGIS/rest/services/wocqi_all_wmas_lim/MapServer/0",{
            mode: FeatureLayer.MODE_ONDEMAND,
            outFields: ["*"],
            infoTemplate: infoTemplate,
            opacity: .5
          });
          
          map.addLayer(featureLayer);
          map.infoWindow.resize(255,75);
        }
      });
    </script> 
  </head> 
  <body class="claro"> 
    <div id="mapDiv">
    </div>
  </body> 
</html>

